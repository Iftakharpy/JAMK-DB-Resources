<!DOCTYPE html>
<!-- saved from url=(0091)https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/03_ex_sql_basics_02/ -->
<html class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Antti Häkkinen">
  <link rel="shortcut icon" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/img/favicon.ico">
  <title>Exercise set 3 (SQL basics 2) - Databases [TTC2020]</title>
  <link href="./Exercise set 3 (SQL basics 2) - Databases [TTC2020]_files/css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="./Exercise set 3 (SQL basics 2) - Databases [TTC2020]_files/theme.css" type="text/css">
  <link rel="stylesheet" href="./Exercise set 3 (SQL basics 2) - Databases [TTC2020]_files/theme_extra.css" type="text/css">
  <link rel="stylesheet" href="./Exercise set 3 (SQL basics 2) - Databases [TTC2020]_files/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Exercise set 3 (SQL basics 2)";
    var mkdocs_page_input_path = "exercises/03_ex_sql_basics_02.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="./Exercise set 3 (SQL basics 2) - Databases [TTC2020]_files/jquery-2.1.1.min.js.download" defer=""></script>
  <script src="./Exercise set 3 (SQL basics 2) - Databases [TTC2020]_files/modernizr-2.8.3.min.js.download" defer=""></script>
  <script src="./Exercise set 3 (SQL basics 2) - Databases [TTC2020]_files/highlight.min.js.download"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document" data-new-gr-c-s-check-loaded="14.993.0" data-gr-ext-installed="">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/" class="icon icon-home"> Databases [TTC2020]</a>
        <div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here">
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/">Course overview</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tools</span>
    <ul class="subnav" style="display: none;">
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/tools/environment_preparation_guide/">Environment preparation</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/tools/db_query_guide/">Database query guide</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/tools/data_modeling_guide/">Data modeling guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Materials</span>
    <ul class="subnav" style="display: none;">
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/materials/01_introduction_to_databases/">Introduction to databases</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/materials/02_database_design/">Database design</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/materials/03_sql_basics_01/">SQL basics 1</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/materials/04_sql_basics_02/">SQL basics 2</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/materials/05_sql_basics_03/">SQL basics 3</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/materials/06_sql_basics_04/">SQL basics 4</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/materials/07_sql_basics_05/">SQL basics 5</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/materials/08_nosql/">NoSQL</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Exercises</span>
    <ul class="subnav" style="display: list-item;">
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/01_ex_database_design/">Exercise set 1 (Database design)</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/02_ex_sql_basics_01/">Exercise set 2 (SQL basics 1)</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/03_ex_sql_basics_02/">Exercise set 3 (SQL basics 2)</a>
    <ul class="subnav" style="display: block;">
            
    <li class="toctree-l3"><a href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/03_ex_sql_basics_02/#exercise-set-3-sql-basics-2">Exercise set 3 - SQL basics 2</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/03_ex_sql_basics_02/#aggregate-functions">Aggregate functions</a></li>
        
            <li><a class="toctree-l4" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/03_ex_sql_basics_02/#string-patterns">String patterns</a></li>
        
            <li><a class="toctree-l4" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/03_ex_sql_basics_02/#other-functions">Other functions</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/04_ex_sql_basics_03/">Exercise set 4 (SQL basics 3)</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/05_ex_sql_basics_04/">Exercise set 5 (SQL basics 4)</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/06_ex_sql_basics_05/">Exercise set 6 (SQL basics 5)</a>
                </li>
                <li class="">
                    
    <a class="" href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/07_ex_nosql/">Exercise set 7 (NoSQL)</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/">Databases [TTC2020]</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/">Docs</a> »</li>
    
      
        
          <li>Exercises »</li>
        
      
    
    <li>Exercise set 3 (SQL basics 2)</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="exercise-set-3-sql-basics-2">Exercise set 3 - SQL basics 2</h1>
<ul>
<li>Ocelot exercise database presented in SQL basics 1 will be used in this exercise</li>
<li>Return exercise in .txt format and use formatting presented below (question always followed be the query)</li>
</ul>
<pre><code class="language-sql hljs"><span class="hljs-comment">-- Select all employees from table</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> EMPS;
</code></pre>
<h2 id="aggregate-functions">Aggregate functions</h2>
<ol>
    <li>Select the average of rate values from departments M-P. Set result set column name to be <i>Average</i>. Result set value should be presented with two decimals.</li>
    <li>Select employee count of employees having rate value between 6-8. Set result set column name to be <i>EmpRateCount</i>.</li>
    <li>Count the sum for rate values of employees working in departments A-G?</li>
    <li>Select the maximum and minimum value of rate value from employees living in Davis. Set result set column names to be <i>Greatest</i> and <i>Smallest</i>.</li>
    <li>Count the amount of employees having rate value over 10 from each department. Department and employee count must be included in the result set. Result set column name should be <i>Count</i>. Set result set by <i>Count</i> column in descending order.</li>
</ol>

<h2 id="string-patterns">String patterns</h2>
<ol start="6">
    <li>Create new usernames for employees using SUBSTRING function. Username should include two letters from firstname, last three letters from surname and first three numbers from phone number. Use column name <i>Username</i>.</li>
    <li>Select different cities and show city names in lowercase letters in the result set. Use column name <i>Locations</i>. Order result set by city name in ascending order.</li>
    <li>Select employee firstname, surname and the length of surname (use column name <i>surname_length</i>). Include only employees whose surname length is greater than six characters.</li>
</ol>

<h2 id="other-functions">Other functions</h2>
<ol start="9">
    <li>Categorize department budgets in the following manner: budgets below 100000 dollars will be categorized as <i>Low</i> and budgets greater than 100000 as <i>High</i>. Include columns <i>dept</i>, <i>duty</i>, <i>budget</i> and a newly created column (use column name <i>budget_categorization</i>) in the result set.</li>
    <li>Count rate value averages for each city (use column name <i>city_averages</i>). City and the average of rate values should be included in the result set. Use descending order by rate value for the result set.</li>
    <li>Analyze what the following SELECT query returns and why (not related to Ocelot training database).</li>
</ol>

<pre><code class="language-sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">CURRENT_USER</span>, 
    <span class="hljs-keyword">CASE</span>
        <span class="hljs-keyword">WHEN</span> <span class="hljs-keyword">CAST</span>(<span class="hljs-keyword">CURRENT_DATE</span> <span class="hljs-keyword">AS</span> <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">10</span>)) &lt;= <span class="hljs-string">'2011-02-22'</span>
        <span class="hljs-keyword">THEN</span> <span class="hljs-string">'OK'</span>
        <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'Late'</span>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">as</span> CheckIt
<span class="hljs-keyword">FROM</span> TargetTable
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/04_ex_sql_basics_03/" class="btn btn-neutral float-right" title="Exercise set 4 (SQL basics 3)">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/02_ex_sql_basics_01/" class="btn btn-neutral" title="Exercise set 2 (SQL basics 1)"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/02_ex_sql_basics_01/" style="color: #fcfcfc;">« Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="https://hantt.pages.labranet.jamk.fi/ttc2020-online-material/exercises/04_ex_sql_basics_03/" style="color: #fcfcfc">Next »</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="./Exercise set 3 (SQL basics 2) - Databases [TTC2020]_files/theme.js.download" defer=""></script>
      <script src="./Exercise set 3 (SQL basics 2) - Databases [TTC2020]_files/main.js.download" defer=""></script>



</body></html>